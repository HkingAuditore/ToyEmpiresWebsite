# 建筑

建筑是场上不可移动的，能带来特殊效果的单位。建筑需要耗费资源购买，并在购买后等待一定时间才能生效，称为**修建建筑**，完成的状态称为**建成建筑**。

建筑必须修建在建筑槽位上，一个建筑槽位上只能修建一个建筑。建筑槽位的位置由战场决定，玩家无法移动。建筑必须建成后才能带来特殊效果。

玩家可以同时拥有多个同种建筑（如同时拥有2个住房），这些建筑的效果将得到叠加。

## 建筑建造 

地图的三条路上有多个建筑槽位，在游戏开始时均为空闲状态。  
玩家可以在空闲的建筑槽位建造建筑，确定进行建造后建筑槽位将由空闲状态转为占用状态。建造建筑需要花费一定的黄金并等待一定的时间，这段过程称为**建造过程**，建筑必须在建成后才能起效。

建筑拥有防御力与HP，一旦HP归零视为建筑被摧毁，其能提供的所有效果将全部消失，建筑槽位将回归空闲状态。  
通过**修理**可以将建筑的HP回满。  

玩家可以主动**拆除**建筑，这样将可以将占用的建筑槽位空出，视为建筑被摧毁。拆除过程是瞬间的。

:::warning[注意]
- 升级建筑无法将建筑的HP回满，但是若升级会提高建筑的HP上限，则建筑的当前HP也会按照比例提高。
- 当玩家开始建造建筑时，建筑的HP即为满格建造过程中的建筑可以被摧毁。
:::

:::tip[提示]
游戏的不同时期需要的建筑也许会有不同，因此玩家可能需要根据战场形势主动拆除建筑。   
:::

## 建筑修理 

当建筑的HP不为满格时，玩家使建筑进入修复状态。  
在建筑进入修复状态时，其每过$s_{i}$时间，就会增长$h_{i}$点HP，同时耗费$c_{i}$点**食物**。其中，$h_{i}$与生产力有关。  
建筑HP回满时，建筑自动退出修复状态，玩家也可以手动选择退出修复状态。

:::warning[注意]
若建筑在修复时玩家食物耗尽，建筑将不会回复HP，但其仍然将保持修复状态；这种“停滞”的修复状态直到食物重新满足需求才能恢复正常。
:::

## 建筑升级 

一个建筑可以向多个方向升级，不同方向的升级可以共存。

建筑一旦被建成，即为其所有升级方向的**LV.1**。下文图表中**LV.1**的造价即为建筑的建造造价。*也就是说，对于同一建筑，其所有升级方向的LV.1的造价都相同*。

:::info[示例]
如玩家在升级住房时可以选择向**工人人口**升级或**军事人口**升级，每次只能向一个方向升一级，消耗的资源和时间为目标等级的对应花销。
两个方向的升级可以共存，如住房可以同时为**LV.2 工人人口** + **LV.3 军事人口**。
:::

## 建筑拆除

玩家可以拆除自己已经建成或正在修建的建筑。  
拆除建筑时，根据建筑的当前HP，玩家将得到相应的补偿$C$。$C$满足：

$$
C=\dfrac{hp_{cur}}{hp_{max}}\cdot k_{c}\cdot p_{c}
$$  

其中$k_{c}$为补偿系数，$p_{c}$为建筑累计造价，$p_{c}=\sum ^{n}_{i}p_{i}$(各等级造价之和，且LV.1只计入一次)。

:::info[示例]
    假设玩家拆除一栋**LV.2 工人人口** + **LV.3 军事人口**的**住房**，住房的当前HP为50，HP上限为100，住房的造价为$p_{1}$，升级LV.2 工人人口的价格为$p_{i2}$，升级LV.2 军事人口的造价为$p_{j2}$，升级LV.3 军事人口的造价为$p_{j3}$，住房的拆除补偿系数为$0.4$,则$p_{c}=p_{1}+p_{i2}+p_{j2}+p_{j3}$，则补偿金额为$C = 0.4\times \dfrac{50}{100}\times p_{c}$
:::

:::tip[提示]
    玩家及时拆除即将被摧毁建筑可以减少损失。   
:::

:::warning[注意]
    只要建筑的HP不为满格状态，拆除建筑均视为被敌方摧毁。
:::